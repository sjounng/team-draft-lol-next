(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9331],{8795:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var a=s(413),r=s(3353),l=s(8541),d=s.n(l);function i(){let[e,t]=(0,r.useState)([]),[s,l]=(0,r.useState)({page:1,limit:20,totalCount:0,totalPages:0}),[i,c]=(0,r.useState)(!0),[n,o]=(0,r.useState)("");(0,r.useEffect)(()=>{x(1)},[]);let x=async e=>{c(!0),o("");try{let s=await fetch("/api/records?page=".concat(e));if(s.ok){let e=await s.json();t(e.data.records),l(e.data.pagination)}else{let e=await s.json();o(e.error||"전적을 불러오는데 실패했습니다.")}}catch(e){console.error("Error fetching records:",e),o("전적을 불러오는 중 오류가 발생했습니다.")}finally{c(!1)}},m=e=>{x(e),window.scrollTo({top:0,behavior:"smooth"})};return i&&0===e.length?(0,a.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[var(--primary)]"})}):(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-[var(--text-primary)] mb-2",children:"게임 기록"}),(0,a.jsx)("p",{className:"text-[var(--text-muted)]",children:"내가 참여한 게임 전적을 확인하세요"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8",children:[(0,a.jsxs)("div",{className:"card",children:[(0,a.jsx)("div",{className:"text-sm text-[var(--text-muted)] mb-1",children:"총 게임 수"}),(0,a.jsx)("div",{className:"text-2xl font-bold text-[var(--text-primary)]",children:s.totalCount})]}),(0,a.jsxs)("div",{className:"card",children:[(0,a.jsx)("div",{className:"text-sm text-[var(--text-muted)] mb-1",children:"승리"}),(0,a.jsx)("div",{className:"text-2xl font-bold text-green-500",children:e.filter(e=>!0===e.won&&e.isApplied).length})]}),(0,a.jsxs)("div",{className:"card",children:[(0,a.jsx)("div",{className:"text-sm text-[var(--text-muted)] mb-1",children:"패배"}),(0,a.jsx)("div",{className:"text-2xl font-bold text-red-500",children:e.filter(e=>!1===e.won&&e.isApplied).length})]}),(0,a.jsxs)("div",{className:"card",children:[(0,a.jsx)("div",{className:"text-sm text-[var(--text-muted)] mb-1",children:"승률"}),(0,a.jsx)("div",{className:"text-2xl font-bold text-[var(--text-primary)]",children:(()=>{let t=e.filter(e=>!0===e.won&&e.isApplied).length,s=e.filter(e=>null!==e.won&&e.isApplied).length;return s>0?"".concat((t/s*100).toFixed(1),"%"):"0%"})()})]})]}),n&&(0,a.jsx)("div",{className:"mb-6 p-4 bg-red-500/10 border border-red-500/20 rounded-lg text-red-500",children:n}),0===e.length?(0,a.jsxs)("div",{className:"card text-center py-12",children:[(0,a.jsx)("svg",{className:"w-16 h-16 mx-auto mb-4 text-[var(--text-muted)]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),(0,a.jsx)("h3",{className:"text-xl font-semibold text-[var(--text-primary)] mb-2",children:"게임 기록이 없습니다"}),(0,a.jsx)("p",{className:"text-[var(--text-muted)] mb-6",children:"풀에 가입하여 게임을 시작해보세요!"}),(0,a.jsx)(d(),{href:"/dashboard",className:"btn-primary",children:"대시보드로 이동"})]}):(0,a.jsx)("div",{className:"space-y-4",children:e.map(e=>(0,a.jsxs)(d(),{href:"/pools/".concat(e.poolId,"/matches"),className:"card hover:shadow-lg transition-shadow block",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"px-3 py-1 rounded-lg font-semibold ".concat(!0===e.won?"bg-green-500/20 text-green-400":!1===e.won?"bg-red-500/20 text-red-400":"bg-gray-500/20 text-gray-400"),children:!0===e.won?"승리":!1===e.won?"패배":"진행 중"}),(e=>{let t={DRAFT_PENDING:{label:"팀 구성 중",color:"bg-gray-500/20 text-gray-400"},DRAFT_COMPLETE:{label:"밴픽 완료",color:"bg-blue-500/20 text-blue-400"},RESULT_PENDING:{label:"결과 대기",color:"bg-yellow-500/20 text-yellow-400"},COMPLETED:{label:"완료",color:"bg-green-500/20 text-green-400"}}[e]||{label:e,color:"bg-gray-500/20 text-gray-400"};return(0,a.jsx)("span",{className:"px-2 py-1 rounded text-xs font-semibold ".concat(t.color),children:t.label})})(e.status),(0,a.jsxs)("span",{className:"text-sm text-[var(--text-muted)]",children:[e.poolName," (",e.poolTag,")"]})]}),(0,a.jsx)("div",{className:"text-sm text-[var(--text-muted)]",children:new Date(e.createdAt).toLocaleDateString("ko-KR",{year:"numeric",month:"long",day:"numeric"})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-xs text-[var(--text-muted)] mb-1",children:"포지션"}),(0,a.jsx)("div",{className:"font-semibold text-[var(--text-primary)]",children:e.assignedPosition})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-xs text-[var(--text-muted)] mb-1",children:"챔피언"}),(0,a.jsx)("div",{className:"font-semibold text-[var(--text-primary)]",children:e.championName||"-"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-xs text-[var(--text-muted)] mb-1",children:"KDA"}),(0,a.jsx)("div",{className:"font-semibold text-[var(--text-primary)]",children:null!==e.kills&&null!==e.deaths&&null!==e.assists?"".concat(e.kills," / ").concat(e.deaths," / ").concat(e.assists):"-"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-xs text-[var(--text-muted)] mb-1",children:"게임 시간"}),(0,a.jsx)("div",{className:"font-semibold text-[var(--text-primary)]",children:(e=>{if(!e)return"-";let t=Math.floor(e/60);return"".concat(t,":").concat((e%60).toString().padStart(2,"0"))})(e.gameDuration)})]})]}),e.isApplied&&null!==e.adjustedScore&&(0,a.jsx)("div",{className:"pt-4 border-t border-[var(--border-color)]",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-[var(--text-muted)]",children:"점수 변화"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"font-semibold text-[var(--text-primary)]",children:e.originalScore}),(0,a.jsx)("span",{className:"text-[var(--text-muted)]",children:"→"}),(0,a.jsx)("span",{className:"font-semibold text-[var(--text-primary)]",children:e.originalScore+e.adjustedScore}),(0,a.jsxs)("span",{className:"font-bold ".concat(e.adjustedScore>0?"text-green-500":"text-red-500"),children:["(",e.adjustedScore>0?"+":"",e.adjustedScore,")"]})]})]})})]},e.recordId))}),s.totalPages>1&&(0,a.jsxs)("div",{className:"mt-8 flex justify-center items-center gap-2",children:[(0,a.jsx)("button",{onClick:()=>m(s.page-1),disabled:1===s.page,className:"btn-secondary disabled:opacity-50 disabled:cursor-not-allowed",children:"이전"}),(0,a.jsx)("div",{className:"flex gap-1",children:Array.from({length:s.totalPages},(e,t)=>t+1).filter(e=>1===e||e===s.totalPages||2>=Math.abs(e-s.page)).map((e,t,r)=>{let l=t>0&&e-r[t-1]>1;return(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[l&&(0,a.jsx)("span",{className:"px-2 text-[var(--text-muted)]",children:"..."}),(0,a.jsx)("button",{onClick:()=>m(e),className:"px-4 py-2 rounded-lg font-medium transition-colors ".concat(e===s.page?"bg-[var(--primary)] text-white":"bg-[var(--surface)] text-[var(--text-secondary)] hover:text-[var(--text-primary)] hover:bg-[var(--surface-hover)]"),children:e})]},e)})}),(0,a.jsx)("button",{onClick:()=>m(s.page+1),disabled:s.page===s.totalPages,className:"btn-secondary disabled:opacity-50 disabled:cursor-not-allowed",children:"다음"})]}),i&&e.length>0&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black/20 flex items-center justify-center z-50",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[var(--primary)]"})})]})}},9717:(e,t,s)=>{Promise.resolve().then(s.bind(s,8795))}},e=>{e.O(0,[8541,2613,6299,7358],()=>e(e.s=9717)),_N_E=e.O()}]);