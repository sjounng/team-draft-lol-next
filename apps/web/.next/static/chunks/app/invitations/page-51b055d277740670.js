(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7997],{5509:(e,t,a)=>{"use strict";a.d(t,{A:()=>o,AuthProvider:()=>l});var s=a(413),r=a(3353),i=a(7950);let n=(0,r.createContext)(void 0);function l(e){let{children:t}=e,[a,l]=(0,r.useState)(null),[o,c]=(0,r.useState)(!0),d=(0,i.useRouter)();(0,r.useEffect)(()=>{u()},[]);let u=async()=>{try{let e=await fetch("/api/auth/me");if(e.ok){let t=await e.json();l(t.data)}else l(null)}catch(e){console.error("Error fetching user:",e),l(null)}finally{c(!1)}},h=async(e,t)=>{let a=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})});if(!a.ok)throw Error((await a.json()).error||"Login failed");l((await a.json()).data.user),d.push("/dashboard")},x=async e=>{let t=await fetch("/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error((await t.json()).error||"Registration failed");l((await t.json()).data.user),d.push("/dashboard")},m=async()=>{await fetch("/api/auth/logout",{method:"POST"}),l(null),d.push("/login")},f=async()=>{await u()};return(0,s.jsx)(n.Provider,{value:{user:a,loading:o,login:h,register:x,logout:m,refreshUser:f},children:t})}function o(){let e=(0,r.useContext)(n);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},6773:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>c});var s=a(413),r=a(5509),i=a(3353),n=a(7950),l=a(8541),o=a.n(l);function c(){let{user:e,loading:t}=(0,r.A)(),a=(0,n.useRouter)(),[l,c]=(0,i.useState)([]),[d,u]=(0,i.useState)(!0),[h,x]=(0,i.useState)(null);(0,i.useEffect)(()=>{t||e||a.push("/login")},[e,t,a]),(0,i.useEffect)(()=>{e&&m()},[e]);let m=async()=>{try{let e=await fetch("/api/invitations");if(e.ok){let t=await e.json();c(t.data)}}catch(e){console.error("Error fetching invitations:",e)}finally{u(!1)}},f=async e=>{x(e);try{let t=await fetch("/api/invitations/".concat(e,"/accept"),{method:"PUT"});if(t.ok)c(t=>t.filter(t=>t.invitationId!==e));else{let e=await t.json();alert(e.error||"초대 수락에 실패했습니다.")}}catch(e){console.error("Error accepting invitation:",e),alert("초대 수락 중 오류가 발생했습니다.")}finally{x(null)}},p=async e=>{x(e);try{let t=await fetch("/api/invitations/".concat(e,"/reject"),{method:"PUT"});if(t.ok)c(t=>t.filter(t=>t.invitationId!==e));else{let e=await t.json();alert(e.error||"초대 거절에 실패했습니다.")}}catch(e){console.error("Error rejecting invitation:",e),alert("초대 거절 중 오류가 발생했습니다.")}finally{x(null)}};return t||!e?(0,s.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[var(--accent-purple)]"})}):(0,s.jsxs)("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-4xl font-black mb-3 gradient-text",children:"초대장"}),(0,s.jsx)("p",{className:"text-[var(--text-secondary)]",children:"받은 Pool 초대를 확인하고 수락/거절하세요"})]}),(0,s.jsx)(o(),{href:"/dashboard",className:"btn-secondary",children:"← 대시보드"})]}),d?(0,s.jsx)("div",{className:"card",children:(0,s.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[var(--accent-purple)]"})})}):0===l.length?(0,s.jsx)("div",{className:"card",children:(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)("svg",{className:"w-16 h-16 mx-auto mb-4 text-[var(--text-muted)]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),(0,s.jsx)("h3",{className:"text-lg font-semibold text-[var(--text-primary)] mb-2",children:"받은 초대가 없습니다"}),(0,s.jsx)("p",{className:"text-sm text-[var(--text-secondary)]",children:"Pool 초대가 오면 여기에 표시됩니다"})]})}):(0,s.jsx)("div",{className:"space-y-4",children:l.map(e=>(0,s.jsx)("div",{className:"card",children:(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,s.jsx)("h3",{className:"text-xl font-bold text-[var(--text-primary)]",children:e.pool.name}),(0,s.jsxs)("span",{className:"px-2 py-1 text-xs font-semibold rounded bg-[var(--accent-purple)]/20 text-[var(--accent-purple)]",children:["#",e.pool.tag]})]}),(0,s.jsxs)("div",{className:"flex items-center text-sm text-[var(--text-secondary)]",children:[(0,s.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),"초대한 사람: ",(0,s.jsx)("span",{className:"font-semibold ml-1",children:e.sender.username})]})]}),(0,s.jsxs)("div",{className:"flex gap-2 ml-4",children:[(0,s.jsx)("button",{onClick:()=>f(e.invitationId),disabled:h===e.invitationId,className:"btn-primary px-4 py-2",children:h===e.invitationId?(0,s.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):"수락"}),(0,s.jsx)("button",{onClick:()=>p(e.invitationId),disabled:h===e.invitationId,className:"btn-secondary px-4 py-2",children:"거절"})]})]})},e.invitationId))})]})}},7107:(e,t,a)=>{Promise.resolve().then(a.bind(a,6773))},7950:(e,t,a)=>{"use strict";var s=a(3858);a.o(s,"useParams")&&a.d(t,{useParams:function(){return s.useParams}}),a.o(s,"usePathname")&&a.d(t,{usePathname:function(){return s.usePathname}}),a.o(s,"useRouter")&&a.d(t,{useRouter:function(){return s.useRouter}})}},e=>{e.O(0,[8541,2613,6299,7358],()=>e(e.s=7107)),_N_E=e.O()}]);