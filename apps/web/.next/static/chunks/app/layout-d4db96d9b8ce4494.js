(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7177],{2248:(e,r,t)=>{Promise.resolve().then(t.bind(t,4928)),Promise.resolve().then(t.bind(t,5509)),Promise.resolve().then(t.t.bind(t,5416,23))},4928:(e,r,t)=>{"use strict";t.d(r,{default:()=>c});var a=t(413),s=t(8541),n=t.n(s),i=t(5509),o=t(7950),l=t(3353);function c(){var e,r;let{user:t,loading:s,logout:c}=(0,i.A)(),h=(0,o.usePathname)(),[u,x]=(0,l.useState)(0);(0,l.useEffect)(()=>{if(t){m();let e=setInterval(m,3e4);return()=>clearInterval(e)}},[t]);let m=async()=>{try{let e=await fetch("/api/invitations");if(e.ok){let r=await e.json();x(r.data.length)}}catch(e){console.error("Error fetching invitations:",e)}};return s?(0,a.jsx)("nav",{className:"fixed top-0 left-0 right-0 z-50 border-b border-[var(--border)] bg-[var(--background)]/80 backdrop-blur-lg",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsx)("div",{className:"flex items-center justify-between h-16",children:(0,a.jsx)("div",{className:"flex items-center",children:(0,a.jsx)(n(),{href:"/",className:"text-xl font-bold gradient-text",children:"Team Draft LOL"})})})})}):(0,a.jsx)("nav",{className:"fixed top-0 left-0 right-0 z-50 border-b border-[var(--border)] bg-[var(--background)]/80 backdrop-blur-lg",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"flex items-center justify-between h-16",children:[(0,a.jsx)("div",{className:"flex items-center",children:(0,a.jsx)(n(),{href:t?"/dashboard":"/",className:"text-xl font-bold gradient-text",children:"Team Draft LOL"})}),t?(0,a.jsxs)("div",{className:"hidden md:flex items-center space-x-1",children:[(0,a.jsx)(d,{href:"/dashboard",isActive:"/dashboard"===h,children:"대시보드"}),(0,a.jsx)(d,{href:"/records",isActive:"/records"===h,children:"게임 기록"}),(0,a.jsx)(d,{href:"/tiers",isActive:"/tiers"===h,children:"티어"}),(0,a.jsxs)("div",{className:"ml-4 flex items-center space-x-3 pl-4 border-l border-[var(--border)]",children:[(0,a.jsxs)(n(),{href:"/invitations",className:"relative p-2 rounded-lg text-[var(--text-secondary)] hover:text-[var(--text-primary)] hover:bg-[var(--surface-hover)] transition-colors",title:"초대장",children:[(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),u>0&&(0,a.jsx)("span",{className:"absolute -top-1 -right-1 flex items-center justify-center w-5 h-5 text-xs font-bold text-white bg-gradient-to-r from-[var(--accent-purple)] to-[var(--accent-pink)] rounded-full",children:u>9?"9+":u})]}),(0,a.jsxs)(n(),{href:"/profile",className:"flex items-center space-x-2 px-3 py-2 rounded-lg text-sm text-[var(--text-secondary)] hover:text-[var(--text-primary)] hover:bg-[var(--surface-hover)] transition-colors",children:[(0,a.jsx)("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-[var(--accent-purple)] to-[var(--accent-blue)] flex items-center justify-center text-white font-semibold text-xs",children:(null==(r=t.username)||null==(e=r[0])?void 0:e.toUpperCase())||"U"}),(0,a.jsx)("span",{className:"font-medium",children:t.username})]}),(0,a.jsx)("button",{onClick:()=>c(),className:"px-3 py-2 rounded-lg text-sm text-[var(--text-muted)] hover:text-[var(--text-primary)] hover:bg-[var(--surface-hover)] transition-colors",children:"로그아웃"})]})]}):(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)(n(),{href:"/login",className:"btn-secondary",children:"로그인"}),(0,a.jsx)(n(),{href:"/register",className:"btn-primary",children:"회원가입"})]}),t&&(0,a.jsx)("div",{className:"md:hidden",children:(0,a.jsx)("button",{className:"p-2 rounded-lg text-[var(--text-secondary)] hover:text-[var(--text-primary)] hover:bg-[var(--surface-hover)]",children:(0,a.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})})]})})})}function d(e){let{href:r,isActive:t,children:s}=e;return(0,a.jsx)(n(),{href:r,className:"px-4 py-2 rounded-lg text-sm font-medium transition-colors ".concat(t?"bg-[var(--surface)] text-[var(--text-primary)]":"text-[var(--text-secondary)] hover:text-[var(--text-primary)] hover:bg-[var(--surface-hover)]"),children:s})}},5416:()=>{},5509:(e,r,t)=>{"use strict";t.d(r,{A:()=>l,AuthProvider:()=>o});var a=t(413),s=t(3353),n=t(7950);let i=(0,s.createContext)(void 0);function o(e){let{children:r}=e,[t,o]=(0,s.useState)(null),[l,c]=(0,s.useState)(!0),d=(0,n.useRouter)();(0,s.useEffect)(()=>{h()},[]);let h=async()=>{try{let e=await fetch("/api/auth/me");if(e.ok){let r=await e.json();o(r.data)}else o(null)}catch(e){console.error("Error fetching user:",e),o(null)}finally{c(!1)}},u=async(e,r)=>{let t=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:r})});if(!t.ok)throw Error((await t.json()).error||"Login failed");o((await t.json()).data.user),d.push("/dashboard")},x=async e=>{let r=await fetch("/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!r.ok)throw Error((await r.json()).error||"Registration failed");o((await r.json()).data.user),d.push("/dashboard")},m=async()=>{await fetch("/api/auth/logout",{method:"POST"}),o(null),d.push("/login")},v=async()=>{await h()};return(0,a.jsx)(i.Provider,{value:{user:t,loading:l,login:u,register:x,logout:m,refreshUser:v},children:r})}function l(){let e=(0,s.useContext)(i);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},7950:(e,r,t)=>{"use strict";var a=t(3858);t.o(a,"useParams")&&t.d(r,{useParams:function(){return a.useParams}}),t.o(a,"usePathname")&&t.d(r,{usePathname:function(){return a.usePathname}}),t.o(a,"useRouter")&&t.d(r,{useRouter:function(){return a.useRouter}})}},e=>{e.O(0,[9109,8541,2613,6299,7358],()=>e(e.s=2248)),_N_E=e.O()}]);