(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4520],{3918:(e,t,r)=>{"use strict";r.d(t,{$:()=>s});var a=r(413);function s(e){let{message:t}=e;return t?(0,a.jsx)("div",{className:"px-4 py-3 rounded-lg bg-[var(--error)]/10 border border-[var(--error)]/30 text-[var(--error)] text-sm",children:t}):null}},4630:(e,t,r)=>{"use strict";r.d(t,{LoginForm:()=>c});var a=r(413),s=r(3353),i=r(5509),n=r(8541),l=r.n(n),o=r(3918),u=r(8097),d=r(5447);function c(){let{login:e}=(0,i.A)(),[t,r]=(0,s.useState)(""),[n,c]=(0,s.useState)(""),[m,h]=(0,s.useState)(""),[f,x]=(0,s.useState)(!1),p=async r=>{r.preventDefault(),h(""),x(!0);try{await e(t,n)}catch(e){h(e.message||"로그인에 실패했습니다.")}finally{x(!1)}};return(0,a.jsxs)("div",{className:"card",children:[(0,a.jsxs)("form",{onSubmit:p,className:"space-y-5",children:[(0,a.jsx)(o.$,{message:m}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-[var(--text-primary)] mb-2",children:"이메일"}),(0,a.jsx)("input",{id:"email",type:"email",required:!0,value:t,onChange:e=>r(e.target.value),className:"input w-full",placeholder:"your@email.com",disabled:f})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-[var(--text-primary)] mb-2",children:"비밀번호"}),(0,a.jsx)("input",{id:"password",type:"password",required:!0,value:n,onChange:e=>c(e.target.value),className:"input w-full",placeholder:"••••••••",disabled:f})]}),(0,a.jsx)("button",{type:"submit",disabled:f,className:"btn-primary w-full flex items-center justify-center",children:f?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(u.k,{className:"mr-2"}),"로그인 중..."]}):"로그인"})]}),(0,a.jsx)(d.S,{text:"계정이 없으신가요?"}),(0,a.jsx)(l(),{href:"/register",className:"btn-secondary w-full text-center block",children:"회원가입"})]})}},5447:(e,t,r)=>{"use strict";r.d(t,{S:()=>s});var a=r(413);function s(e){let{text:t}=e;return(0,a.jsxs)("div",{className:"relative my-6",children:[(0,a.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,a.jsx)("div",{className:"w-full border-t border-[var(--border)]"})}),(0,a.jsx)("div",{className:"relative flex justify-center text-sm",children:(0,a.jsx)("span",{className:"px-4 bg-[var(--surface)] text-[var(--text-muted)]",children:t})})]})}},5509:(e,t,r)=>{"use strict";r.d(t,{A:()=>o,AuthProvider:()=>l});var a=r(413),s=r(3353),i=r(7950);let n=(0,s.createContext)(void 0);function l(e){let{children:t}=e,[r,l]=(0,s.useState)(null),[o,u]=(0,s.useState)(!0),d=(0,i.useRouter)();(0,s.useEffect)(()=>{c()},[]);let c=async()=>{try{let e=await fetch("/api/auth/me");if(e.ok){let t=await e.json();l(t.data)}else l(null)}catch(e){console.error("Error fetching user:",e),l(null)}finally{u(!1)}},m=async(e,t)=>{let r=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})});if(!r.ok)throw Error((await r.json()).error||"Login failed");l((await r.json()).data.user),d.push("/dashboard")},h=async e=>{let t=await fetch("/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error((await t.json()).error||"Registration failed");l((await t.json()).data.user),d.push("/dashboard")},f=async()=>{await fetch("/api/auth/logout",{method:"POST"}),l(null),d.push("/login")},x=async()=>{await c()};return(0,a.jsx)(n.Provider,{value:{user:r,loading:o,login:m,register:h,logout:f,refreshUser:x},children:t})}function o(){let e=(0,s.useContext)(n);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},6885:(e,t,r)=>{Promise.resolve().then(r.bind(r,4630)),Promise.resolve().then(r.t.bind(r,8541,23))},7950:(e,t,r)=>{"use strict";var a=r(3858);r.o(a,"useParams")&&r.d(t,{useParams:function(){return a.useParams}}),r.o(a,"usePathname")&&r.d(t,{usePathname:function(){return a.usePathname}}),r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}})},8097:(e,t,r)=>{"use strict";r.d(t,{k:()=>s});var a=r(413);function s(e){let{size:t="md",className:r=""}=e;return(0,a.jsx)("div",{className:"animate-spin rounded-full border-b-2 border-white ".concat({sm:"h-4 w-4",md:"h-5 w-5",lg:"h-8 w-8"}[t]," ").concat(r)})}}},e=>{e.O(0,[8541,2613,6299,7358],()=>e(e.s=6885)),_N_E=e.O()}]);