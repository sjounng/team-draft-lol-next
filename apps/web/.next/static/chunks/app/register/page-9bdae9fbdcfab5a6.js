(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2454],{2921:(e,a,t)=>{Promise.resolve().then(t.bind(t,4330)),Promise.resolve().then(t.t.bind(t,8541,23))},3918:(e,a,t)=>{"use strict";t.d(a,{$:()=>s});var r=t(413);function s(e){let{message:a}=e;return a?(0,r.jsx)("div",{className:"px-4 py-3 rounded-lg bg-[var(--error)]/10 border border-[var(--error)]/30 text-[var(--error)] text-sm",children:a}):null}},4330:(e,a,t)=>{"use strict";t.d(a,{RegisterForm:()=>v});var r=t(413),s=t(3353),n=t(5509),l=t(8541),i=t.n(l),o=t(3918),d=t(8097),c=t(5447),u=t(6207);let m=["TOP","JGL","MID","ADC","SUP"];function v(){let{register:e}=(0,n.A)(),[a,t]=(0,s.useState)({username:"",email:"",password:"",confirmPassword:"",name:"",riotAccount:"",mainLane:"",subLane:""}),[l,u]=(0,s.useState)(""),[m,v]=(0,s.useState)(!1),x=async t=>{if(t.preventDefault(),u(""),a.password!==a.confirmPassword)return void u("비밀번호가 일치하지 않습니다.");if(a.password.length<6)return void u("비밀번호는 최소 6자 이상이어야 합니다.");if(a.mainLane&&a.mainLane===a.subLane)return void u("메인 포지션과 서브 포지션은 달라야 합니다.");v(!0);try{let t,n;if(a.riotAccount){var r,s;let e=a.riotAccount.split("#");t=(null==(r=e[0])?void 0:r.trim())||void 0,n=(null==(s=e[1])?void 0:s.trim())||void 0}await e({username:a.username,email:a.email,password:a.password,name:a.name||void 0,riotId:t,riotTag:n,mainLane:a.mainLane||void 0,subLane:a.subLane||void 0})}catch(e){u(e.message||"회원가입에 실패했습니다.")}finally{v(!1)}};return(0,r.jsxs)("div",{className:"card",children:[(0,r.jsxs)("form",{onSubmit:x,className:"space-y-5",children:[(0,r.jsx)(o.$,{message:l}),(0,r.jsx)(h,{formData:a,loading:m,onChange:(e,a)=>{t(t=>({...t,[e]:a}))}}),(0,r.jsx)("button",{type:"submit",disabled:m,className:"btn-primary w-full flex items-center justify-center",children:m?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(d.k,{className:"mr-2"}),"가입 중..."]}):"회원가입"})]}),(0,r.jsx)(c.S,{text:"이미 계정이 있으신가요?"}),(0,r.jsx)(i(),{href:"/login",className:"btn-secondary w-full text-center block",children:"로그인"})]})}function h(e){let{formData:a,loading:t,onChange:s}=e;return(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"username",className:"block text-sm font-medium text-[var(--text-primary)] mb-2",children:"사용자명"}),(0,r.jsx)("input",{id:"username",type:"text",required:!0,value:a.username,onChange:e=>s("username",e.target.value),className:"input w-full",placeholder:"username123",disabled:t})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-[var(--text-primary)] mb-2",children:"이메일"}),(0,r.jsx)("input",{id:"email",type:"email",required:!0,value:a.email,onChange:e=>s("email",e.target.value),className:"input w-full",placeholder:"your@email.com",disabled:t})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-[var(--text-primary)] mb-2",children:"비밀번호"}),(0,r.jsx)("input",{id:"password",type:"password",required:!0,value:a.password,onChange:e=>s("password",e.target.value),className:"input w-full",placeholder:"••••••••",disabled:t})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-[var(--text-primary)] mb-2",children:"비밀번호 확인"}),(0,r.jsx)("input",{id:"confirmPassword",type:"password",required:!0,value:a.confirmPassword,onChange:e=>s("confirmPassword",e.target.value),className:"input w-full",placeholder:"••••••••",disabled:t})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-[var(--text-primary)] mb-2",children:"이름"}),(0,r.jsx)("input",{id:"name",type:"text",value:a.name,onChange:e=>s("name",e.target.value),className:"input w-full",placeholder:"홍길동",disabled:t})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"riotAccount",className:"block text-sm font-medium text-[var(--text-primary)] mb-2",children:"라이엇 계정"}),(0,r.jsx)("input",{id:"riotAccount",type:"text",value:a.riotAccount,onChange:e=>s("riotAccount",e.target.value),className:"input w-full",placeholder:"HideOnBush#KR1",disabled:t})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsx)(u.A,{id:"mainLane",label:"메인 포지션",value:a.mainLane,onChange:e=>s("mainLane",e),options:[{value:"",label:"선택하지 않음"},...m.map(e=>({value:e,label:e}))],placeholder:"선택하지 않음",disabled:t}),(0,r.jsx)(u.A,{id:"subLane",label:"서브 포지션",value:a.subLane,onChange:e=>s("subLane",e),options:[{value:"",label:"선택하지 않음"},...m.filter(e=>e!==a.mainLane).map(e=>({value:e,label:e}))],placeholder:"선택하지 않음",disabled:t})]})]})}},5447:(e,a,t)=>{"use strict";t.d(a,{S:()=>s});var r=t(413);function s(e){let{text:a}=e;return(0,r.jsxs)("div",{className:"relative my-6",children:[(0,r.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,r.jsx)("div",{className:"w-full border-t border-[var(--border)]"})}),(0,r.jsx)("div",{className:"relative flex justify-center text-sm",children:(0,r.jsx)("span",{className:"px-4 bg-[var(--surface)] text-[var(--text-muted)]",children:a})})]})}},5509:(e,a,t)=>{"use strict";t.d(a,{A:()=>o,AuthProvider:()=>i});var r=t(413),s=t(3353),n=t(7950);let l=(0,s.createContext)(void 0);function i(e){let{children:a}=e,[t,i]=(0,s.useState)(null),[o,d]=(0,s.useState)(!0),c=(0,n.useRouter)();(0,s.useEffect)(()=>{u()},[]);let u=async()=>{try{let e=await fetch("/api/auth/me");if(e.ok){let a=await e.json();i(a.data)}else i(null)}catch(e){console.error("Error fetching user:",e),i(null)}finally{d(!1)}},m=async(e,a)=>{let t=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:a})});if(!t.ok)throw Error((await t.json()).error||"Login failed");i((await t.json()).data.user),c.push("/dashboard")},v=async e=>{let a=await fetch("/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!a.ok)throw Error((await a.json()).error||"Registration failed");i((await a.json()).data.user),c.push("/dashboard")},h=async()=>{await fetch("/api/auth/logout",{method:"POST"}),i(null),c.push("/login")},x=async()=>{await u()};return(0,r.jsx)(l.Provider,{value:{user:t,loading:o,login:m,register:v,logout:h,refreshUser:x},children:a})}function o(){let e=(0,s.useContext)(l);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},6207:(e,a,t)=>{"use strict";t.d(a,{A:()=>n});var r=t(413),s=t(3353);function n(e){let{id:a,value:t,onChange:n,options:l,placeholder:i="선택하세요",disabled:o=!1,label:d}=e,[c,u]=(0,s.useState)(!1),[m,v]=(0,s.useState)(-1),h=(0,s.useRef)(null),x=l.find(e=>e.value===t);return(0,s.useEffect)(()=>{let e=e=>{h.current&&!h.current.contains(e.target)&&u(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),(0,s.useEffect)(()=>{if(!c)return;let e=e=>{switch(e.key){case"ArrowDown":e.preventDefault(),v(e=>e<l.length-1?e+1:e);break;case"ArrowUp":e.preventDefault(),v(e=>e>0?e-1:e);break;case"Enter":e.preventDefault(),m>=0&&(n(l[m].value),u(!1));break;case"Escape":e.preventDefault(),u(!1)}};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[c,m,l,n]),(0,r.jsxs)("div",{ref:h,className:"relative",children:[d&&(0,r.jsx)("label",{htmlFor:a,className:"block text-sm font-medium text-[var(--text-primary)] mb-2",children:d}),(0,r.jsxs)("button",{id:a,type:"button",onClick:()=>!o&&u(!c),disabled:o,className:"\n          input w-full flex items-center justify-between\n          ".concat(o?"opacity-50 cursor-not-allowed":"cursor-pointer","\n          ").concat(c?"border-[var(--accent-purple)] ring-2 ring-[var(--accent-purple)]/20":"","\n        "),children:[(0,r.jsx)("span",{className:x?"text-[var(--text-primary)]":"text-[var(--text-muted)]",children:(null==x?void 0:x.label)||i}),(0,r.jsx)("svg",{className:"w-4 h-4 text-[var(--text-muted)] transition-transform ".concat(c?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),c&&!o&&(0,r.jsx)("div",{className:"absolute z-50 w-full mt-2 bg-[var(--surface)] border border-[var(--border)] rounded-lg shadow-lg overflow-hidden animate-dropdown",children:(0,r.jsx)("div",{className:"max-h-60 overflow-y-auto",children:l.map((e,a)=>(0,r.jsx)("button",{type:"button",onClick:()=>{n(e.value),u(!1),v(-1)},onMouseEnter:()=>v(a),className:"\n                  w-full px-4 py-2.5 text-left text-sm transition-colors\n                  ".concat(e.value===t?"bg-[var(--accent-purple)]/10 text-[var(--accent-purple)] font-medium":m===a?"bg-[var(--accent-blue)]/10 text-[var(--accent-blue)] font-medium":"text-[var(--text-secondary)] hover:bg-[var(--accent-blue)]/10 hover:text-[var(--accent-blue)]","\n                "),children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{children:e.label}),e.value===t&&(0,r.jsx)("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})]})},e.value))})})]})}},7950:(e,a,t)=>{"use strict";var r=t(3858);t.o(r,"useParams")&&t.d(a,{useParams:function(){return r.useParams}}),t.o(r,"usePathname")&&t.d(a,{usePathname:function(){return r.usePathname}}),t.o(r,"useRouter")&&t.d(a,{useRouter:function(){return r.useRouter}})},8097:(e,a,t)=>{"use strict";t.d(a,{k:()=>s});var r=t(413);function s(e){let{size:a="md",className:t=""}=e;return(0,r.jsx)("div",{className:"animate-spin rounded-full border-b-2 border-white ".concat({sm:"h-4 w-4",md:"h-5 w-5",lg:"h-8 w-8"}[a]," ").concat(t)})}}},e=>{e.O(0,[8541,2613,6299,7358],()=>e(e.s=2921)),_N_E=e.O()}]);