(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6932],{6491:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>p});var a=s(413),r=s(3353),l=s(7950),n=s(8541),c=s.n(n);function o(e){var t,s,n,c;let{poolId:o,matchId:i,onClose:d}=e,m=(0,l.useRouter)(),[x,u]=(0,r.useState)(null),[h,p]=(0,r.useState)(!0),[v,b]=(0,r.useState)(""),[f,g]=(0,r.useState)(!1),j=(0,r.useRef)(null);(0,r.useEffect)(()=>{x&&(j.current=x.status)},[null==x?void 0:x.status]),(0,r.useEffect)(()=>(N(),()=>{"WAITING_PARTICIPANTS"===j.current?(console.log("[BanPickWaitingModal] Cleanup: leaving WAITING session"),w()):console.log("[BanPickWaitingModal] Cleanup: NOT leaving session (status: ".concat(j.current,")"))}),[]),(0,r.useEffect)(()=>{if(!x)return;let e=setInterval(()=>{y()},2e3);return()=>clearInterval(e)},[x]),(0,r.useEffect)(()=>{(null==x?void 0:x.status)==="IN_PROGRESS"&&m.push("/pools/".concat(o,"/matches/").concat(i,"/banpick"))},[null==x?void 0:x.status]);let N=async()=>{if(!f)try{g(!0),p(!0);let e=await fetch("/api/pools/".concat(o,"/matches/").concat(i,"/banpick/session"),{method:"POST"});if(e.ok){let t=await e.json();u(t.data),y()}else{let t=await e.json();b(t.error||"세션 참여에 실패했습니다.")}}catch(e){b("세션 참여 중 오류가 발생했습니다.")}finally{p(!1),g(!1)}},y=async()=>{try{let e=await fetch("/api/pools/".concat(o,"/matches/").concat(i,"/banpick/session"));if(e.ok){let t=await e.json();t.data&&u(t.data)}}catch(e){console.error("Error fetching session:",e)}},w=async()=>{try{await fetch("/api/pools/".concat(o,"/matches/").concat(i,"/banpick/session"),{method:"DELETE"})}catch(e){console.error("Error leaving session:",e)}},k=(e,t)=>{if(!e||!x)return null;let s=1===t?x.team1Data:x.team2Data;if(!s)return"참여자";let a=s.players.find(t=>t.userId===e);return(null==a?void 0:a.name)||(null==a?void 0:a.username)||"참여자"};return(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-[var(--card-bg)] rounded-lg border border-[var(--border-color)] max-w-2xl w-full p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-[var(--text-primary)]",children:"밴픽 참여 대기"}),(0,a.jsx)("button",{onClick:d,className:"text-[var(--text-muted)] hover:text-[var(--text-primary)] transition-colors",children:(0,a.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),h&&(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[var(--primary)] mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-[var(--text-muted)]",children:"참여 중..."})]}),v&&!h&&(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("svg",{className:"w-16 h-16 text-[var(--error)] mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),(0,a.jsx)("p",{className:"text-[var(--error)] mb-4",children:v}),(0,a.jsx)("button",{onClick:d,className:"btn-secondary",children:"닫기"})]}),x&&!h&&!v&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("div",{className:"bg-[var(--bg)] p-4 rounded-lg border border-[var(--border-color)]",children:(0,a.jsx)("p",{className:"text-sm text-[var(--text-muted)] text-center",children:"양 팀에서 각 1명씩 참여해야 밴픽이 시작됩니다."})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"bg-[var(--bg)] p-6 rounded-lg border border-[var(--border-color)]",children:[(0,a.jsx)("h3",{className:"text-lg font-bold text-[var(--accent-purple)] mb-4 text-center",children:"Team 1"}),(0,a.jsx)("div",{className:"flex flex-col items-center",children:x.team1ParticipantId?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"w-20 h-20 rounded-full bg-gradient-to-br from-[var(--accent-purple)] to-[var(--accent-blue)] flex items-center justify-center text-white font-bold text-2xl mb-3",children:null==(s=k(x.team1ParticipantId,1))||null==(t=s[0])?void 0:t.toUpperCase()}),(0,a.jsx)("p",{className:"text-lg font-semibold text-[var(--text-primary)] mb-2",children:k(x.team1ParticipantId,1)}),(0,a.jsx)("span",{className:"px-3 py-1 bg-green-500/20 text-green-500 rounded-full text-sm font-semibold",children:"참여 완료"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"w-20 h-20 rounded-full bg-[var(--surface-hover)] flex items-center justify-center mb-3",children:(0,a.jsx)("svg",{className:"w-10 h-10 text-[var(--text-muted)] animate-pulse",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),(0,a.jsx)("p",{className:"text-lg font-semibold text-[var(--text-muted)] mb-2",children:"참여 대기 중..."}),(0,a.jsx)("span",{className:"px-3 py-1 bg-yellow-500/20 text-yellow-500 rounded-full text-sm font-semibold",children:"대기 중"})]})})]}),(0,a.jsxs)("div",{className:"bg-[var(--bg)] p-6 rounded-lg border border-[var(--border-color)]",children:[(0,a.jsx)("h3",{className:"text-lg font-bold text-[var(--accent-blue)] mb-4 text-center",children:"Team 2"}),(0,a.jsx)("div",{className:"flex flex-col items-center",children:x.team2ParticipantId?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"w-20 h-20 rounded-full bg-gradient-to-br from-[var(--accent-blue)] to-[var(--accent-purple)] flex items-center justify-center text-white font-bold text-2xl mb-3",children:null==(c=k(x.team2ParticipantId,2))||null==(n=c[0])?void 0:n.toUpperCase()}),(0,a.jsx)("p",{className:"text-lg font-semibold text-[var(--text-primary)] mb-2",children:k(x.team2ParticipantId,2)}),(0,a.jsx)("span",{className:"px-3 py-1 bg-green-500/20 text-green-500 rounded-full text-sm font-semibold",children:"참여 완료"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"w-20 h-20 rounded-full bg-[var(--surface-hover)] flex items-center justify-center mb-3",children:(0,a.jsx)("svg",{className:"w-10 h-10 text-[var(--text-muted)] animate-pulse",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),(0,a.jsx)("p",{className:"text-lg font-semibold text-[var(--text-muted)] mb-2",children:"참여 대기 중..."}),(0,a.jsx)("span",{className:"px-3 py-1 bg-yellow-500/20 text-yellow-500 rounded-full text-sm font-semibold",children:"대기 중"})]})})]})]}),x.team1ParticipantId&&x.team2ParticipantId&&(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[var(--primary)] mx-auto mb-2"}),(0,a.jsx)("p",{className:"text-[var(--primary)] font-semibold",children:"밴픽 화면으로 이동 중..."})]})]})]})})}function i(e){let{matchId:t,poolId:s,team1Players:l,team2Players:n,onClose:c,onSwapSuccess:o}=e,[i,d]=(0,r.useState)(1),[m,x]=(0,r.useState)(null),[u,h]=(0,r.useState)(!1),[p,v]=(0,r.useState)(""),b=e=>{e.preventDefault()},f=async e=>{if(!m||m===e)return void x(null);h(!0),v("");try{let a=await fetch("/api/pools/".concat(s,"/matches/").concat(t,"/swap-champions"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId1:m,userId2:e})});if(a.ok)o();else{let e=await a.json();v(e.error||"챔피언 교환에 실패했습니다.")}}catch(e){console.error("Error swapping champions:",e),v("챔피언 교환 중 오류가 발생했습니다.")}finally{h(!1),x(null)}};return(0,a.jsx)("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50 p-4",onClick:c,children:(0,a.jsxs)("div",{className:"card max-w-2xl w-full max-h-[80vh] overflow-y-auto",onClick:e=>e.stopPropagation(),children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-[var(--text-primary)] mb-4",children:"챔피언 교환"}),(0,a.jsx)("p",{className:"text-[var(--text-muted)] mb-6",children:"챔피언을 드래그하여 다른 플레이어 위에 놓으면 서로 교환됩니다."}),(0,a.jsxs)("div",{className:"flex gap-2 mb-6",children:[(0,a.jsx)("button",{onClick:()=>d(1),className:"flex-1 px-4 py-2 rounded-lg font-semibold transition-all ".concat(1===i?"bg-blue-500 text-white":"bg-[var(--surface)] text-[var(--text-secondary)]"),children:"팀 1"}),(0,a.jsx)("button",{onClick:()=>d(2),className:"flex-1 px-4 py-2 rounded-lg font-semibold transition-all ".concat(2===i?"bg-red-500 text-white":"bg-[var(--surface)] text-[var(--text-secondary)]"),children:"팀 2"})]}),(0,a.jsx)("div",{className:"space-y-2 mb-6",children:(1===i?l:n).map(e=>(0,a.jsx)("div",{draggable:!u,onDragStart:()=>{x(e.userId)},onDragOver:b,onDrop:()=>f(e.userId),className:"w-full p-4 rounded-lg border-2 transition-all cursor-move ".concat(m===e.userId?"opacity-50 border-[var(--primary)]":"border-[var(--border)] bg-[var(--surface)] hover:border-[var(--primary)]/50 hover:scale-[1.02]"),children:(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"text-[var(--text-muted)]",children:(0,a.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,a.jsx)("path",{d:"M7 2a2 2 0 1 0 .001 4.001A2 2 0 0 0 7 2zm0 6a2 2 0 1 0 .001 4.001A2 2 0 0 0 7 8zm0 6a2 2 0 1 0 .001 4.001A2 2 0 0 0 7 14zm6-8a2 2 0 1 0-.001-4.001A2 2 0 0 0 13 6zm0 2a2 2 0 1 0 .001 4.001A2 2 0 0 0 13 8zm0 6a2 2 0 1 0 .001 4.001A2 2 0 0 0 13 14z"})})}),(0,a.jsx)("span",{className:"text-sm font-semibold min-w-[3rem] ".concat(1===i?"text-blue-400":"text-red-400"),children:e.assignedPosition}),e.championId?(0,a.jsx)("div",{className:"w-12 h-12 rounded overflow-hidden border border-[var(--border)] flex-shrink-0",children:(0,a.jsx)("img",{src:"https://ddragon.leagueoflegends.com/cdn/15.1.1/img/champion/".concat(e.championId,".png"),alt:e.championName||"",className:"w-full h-full object-cover",onError:e=>{e.currentTarget.style.display="none"}})}):(0,a.jsx)("div",{className:"w-12 h-12 rounded bg-[var(--bg)] border border-[var(--border)] flex items-center justify-center flex-shrink-0",children:(0,a.jsx)("span",{className:"text-[var(--text-muted)] text-xs",children:"?"})}),(0,a.jsxs)("div",{className:"flex-1 text-left",children:[(0,a.jsx)("div",{className:"font-semibold text-[var(--text-primary)]",children:e.username}),(0,a.jsx)("div",{className:"text-sm text-[var(--text-muted)]",children:e.championName||"미배정"})]})]})},e.userId))}),p&&(0,a.jsx)("div",{className:"mb-4 p-3 bg-red-500/10 border border-red-500/20 rounded-lg text-red-500 text-sm",children:p}),(0,a.jsx)("div",{className:"flex gap-3",children:(0,a.jsx)("button",{onClick:c,className:"flex-1 btn-secondary",disabled:u,children:"닫기"})})]})})}function d(e){let{player:t,champion:s,stats:r,matchStatus:l,positionLabel:n,accentColor:c}=e,o=r&&(null!==r.kills||null!==r.deaths||null!==r.assists);return(0,a.jsxs)("div",{className:"flex items-center justify-between bg-[var(--bg)] p-2 rounded gap-2",children:[(0,a.jsx)("span",{className:"text-xs font-semibold ".concat(c," w-10 flex-shrink-0"),children:n}),(0,a.jsxs)("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex flex-col min-w-0",children:[(0,a.jsx)("span",{className:"text-sm text-[var(--text-primary)] truncate",children:t.name||t.username}),s&&(0,a.jsx)("span",{className:"text-xs ".concat(c," font-semibold truncate"),children:s})]}),("RESULT_PENDING"===l||"COMPLETED"===l)&&o&&(0,a.jsxs)("div",{className:"flex items-center gap-2 flex-shrink-0",children:[(0,a.jsxs)("span",{className:"text-xs text-[var(--text-primary)] font-semibold",children:[r.kills||0,"/",r.deaths||0,"/",r.assists||0]}),(0,a.jsxs)("span",{className:"text-xs text-[var(--text-muted)]",children:[r.cs||0,"CS"]})]})]}),("RESULT_PENDING"===l||"COMPLETED"===l)&&o?(0,a.jsxs)("div",{className:"flex items-center gap-1 flex-shrink-0",children:[(0,a.jsx)("span",{className:"text-xs text-[var(--text-muted)]",children:r.originalScore||0}),r.adjustedScore&&0!==r.adjustedScore&&(0,a.jsxs)("span",{className:"text-xs font-bold ".concat(r.adjustedScore>0?"text-green-500":"text-red-500"),children:[r.adjustedScore>0?"+":"",r.adjustedScore]})]}):(0,a.jsxs)("span",{className:"text-sm text-[var(--text-muted)] flex-shrink-0",children:[(null==r?void 0:r.originalScore)||0,"점"]})]})}let m={DRAFT_PENDING:"밴픽 대기",DRAFT_COMPLETE:"밴픽 완료",RESULT_PENDING:"결과 승인 대기",COMPLETED:"완료"},x={DRAFT_PENDING:"bg-yellow-500/20 text-yellow-500",DRAFT_COMPLETE:"bg-blue-500/20 text-blue-500",RESULT_PENDING:"bg-purple-500/20 text-purple-500",COMPLETED:"bg-green-500/20 text-green-500"},u={TOP:"탑",JGL:"정글",MID:"미드",ADC:"원딜",SUP:"서폿"},h={TOP:1,JGL:2,MID:3,ADC:4,SUP:5};function p(){let e=(0,l.useParams)();(0,l.useRouter)();let t=e.poolId,[s,n]=(0,r.useState)([]),[p,v]=(0,r.useState)(null),[b,f]=(0,r.useState)(!0),[g,j]=(0,r.useState)("ALL"),[N,y]=(0,r.useState)(""),[w,k]=(0,r.useState)(null),[I,P]=(0,r.useState)(null),[E,S]=(0,r.useState)(new Set);(0,r.useEffect)(()=>{C()},[t]),(0,r.useEffect)(()=>{p&&L()},[p,g]);let C=async()=>{try{let e=await fetch("/api/auth/me");if(e.ok){let t=await e.json();y(t.data.id)}let s=await fetch("/api/pools/".concat(t));if(s.ok){let e=await s.json();v(e.data)}}catch(e){console.error("Error fetching user/pool:",e)}},L=async()=>{f(!0);try{let e="ALL"===g?"/api/pools/".concat(t,"/matches"):"/api/pools/".concat(t,"/matches?status=").concat(g),s=await fetch(e);if(s.ok){let e=await s.json();n(e.data)}else console.error("Failed to fetch matches")}catch(e){console.error("Error fetching matches:",e)}finally{f(!1)}},T=async(e,s)=>{if(s.stopPropagation(),confirm("밴픽을 초기화하시겠습니까? 밴픽 데이터가 모두 삭제되고 처음부터 다시 진행해야 합니다."))try{let s=await fetch("/api/pools/".concat(t,"/matches/").concat(e,"/reset-draft"),{method:"POST"});if(s.ok)alert("밴픽이 초기화되었습니다."),L();else{let e=await s.json();alert(e.error||"밴픽 초기화에 실패했습니다.")}}catch(e){console.error("Error resetting draft:",e),alert("밴픽 초기화 중 오류가 발생했습니다.")}},D=async(e,s)=>{if(s.stopPropagation(),confirm("전적을 삭제하시겠습니까? 이 작업은 되돌릴 수 없습니다."))try{let s=await fetch("/api/pools/".concat(t,"/matches/").concat(e),{method:"DELETE"});if(s.ok)alert("전적이 삭제되었습니다."),L();else{let e=await s.json();alert(e.error||"전적 삭제에 실패했습니다.")}}catch(e){console.error("Error deleting match:",e),alert("전적 삭제 중 오류가 발생했습니다.")}},R=(e,t)=>{if(!e.userRecords||0===e.userRecords.length)return null;let s=e.userRecords.find(e=>e.userId===t);return(null==s?void 0:s.championName)||null},A=(e,t)=>e.userRecords&&0!==e.userRecords.length?e.userRecords.find(e=>e.userId===t):null,M=(e,t)=>e.userRecords&&0!==e.userRecords.length?e.userRecords.filter(e=>e.teamNumber===t).reduce((e,t)=>e+(t.adjustedScore||0),0):0,O=e=>[...e].sort((e,t)=>(h[e.assignedPosition]||999)-(h[t.assignedPosition]||999));return(0,a.jsxs)("div",{className:"max-w-6xl mx-auto p-6",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,a.jsxs)("div",{children:[(0,a.jsx)(c(),{href:"/pools/".concat(t),className:"text-[var(--text-muted)] hover:text-[var(--text-primary)] mb-2 inline-block",children:"← 풀로 돌아가기"}),(0,a.jsx)("h1",{className:"text-3xl font-bold text-[var(--text-primary)]",children:"전적 관리"}),p&&(0,a.jsxs)("p",{className:"text-[var(--text-muted)] mt-2",children:[p.name," (",p.tag,")"]})]})}),(0,a.jsxs)("div",{className:"flex gap-2 flex-wrap",children:[(0,a.jsx)("button",{onClick:()=>j("ALL"),className:"px-4 py-2 rounded-lg transition-colors ".concat("ALL"===g?"bg-[var(--primary)] text-white":"bg-[var(--card-bg)] text-[var(--text-muted)] hover:bg-[var(--hover-bg)]"),children:"전체"}),Object.keys(m).map(e=>(0,a.jsx)("button",{onClick:()=>j(e),className:"px-4 py-2 rounded-lg transition-colors ".concat(g===e?"bg-[var(--primary)] text-white":"bg-[var(--card-bg)] text-[var(--text-muted)] hover:bg-[var(--hover-bg)]"),children:m[e]},e))]})]}),b&&(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[var(--primary)] mx-auto"}),(0,a.jsx)("p",{className:"text-[var(--text-muted)] mt-4",children:"전적을 불러오는 중..."})]}),!b&&0===s.length&&(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("svg",{className:"w-16 h-16 text-[var(--text-muted)] mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),(0,a.jsx)("p",{className:"text-[var(--text-muted)] text-lg",children:"ALL"===g?"아직 생성된 전적이 없습니다.":"".concat(m[g]," 상태의 전적이 없습니다.")}),(0,a.jsx)(c(),{href:"/pools/".concat(t,"/teams/create"),className:"btn-primary mt-4 inline-block",children:"팀 생성하기"})]}),!b&&s.length>0&&(0,a.jsx)("div",{className:"space-y-6",children:s.map(e=>{let s=E.has(e.gameId),r="COMPLETED"===e.status;return(0,a.jsxs)("div",{className:"bg-[var(--card-bg)] rounded-lg border border-[var(--border-color)] hover:border-[var(--primary)] transition-colors",children:[(0,a.jsxs)("div",{className:"p-4 flex items-center justify-between ".concat(r?"cursor-pointer hover:bg-[var(--hover-bg)] transition-colors":""),onClick:()=>{var t;return r&&(t=e.gameId,void S(e=>{let s=new Set(e);return s.has(t)?s.delete(t):s.add(t),s}))},children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 flex-1",children:[(0,a.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-semibold ".concat(x[e.status]),children:m[e.status]}),(0,a.jsx)("span",{className:"text-sm text-[var(--text-muted)]",children:new Date(e.createdAt).toLocaleDateString("ko-KR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}),"DRAFT_PENDING"===e.status&&(0,a.jsx)("span",{className:"text-sm text-[var(--text-muted)]",children:(e=>{let t=M(e,1)-M(e,2);return 0===t?"균형 팀":"".concat(Math.abs(t),"점 차이")})(e)}),null!==e.team1Won&&(0,a.jsx)("span",{className:"text-sm font-semibold text-[var(--primary)]",children:e.team1Won?"Team 1 승리":"Team 2 승리"}),r&&null!==e.team1Kills&&null!==e.team2Kills&&(0,a.jsxs)("span",{className:"text-xs text-[var(--text-muted)]",children:["킬: ",e.team1Kills," : ",e.team2Kills]}),r&&(0,a.jsxs)("span",{className:"text-xs text-[var(--text-muted)]",children:["점수 변화: Team 1 (",M(e,1)>0?"+":"",M(e,1),") / Team 2 (",M(e,2)>0?"+":"",M(e,2),")"]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",onClick:e=>e.stopPropagation(),children:[(e=>{let s=(null==p?void 0:p.ownerId)===N;switch(e.status){case"DRAFT_PENDING":return(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("button",{onClick:()=>k(e.gameId),className:"btn-primary text-sm",children:"밴픽 진행하기"}),!e.isApplied&&(0,a.jsx)("button",{onClick:t=>D(e.gameId,t),className:"px-3 py-1.5 bg-gray-500/20 text-gray-400 hover:bg-gray-500/30 rounded-lg font-semibold text-sm transition-colors",title:"전적 삭제",children:"삭제"})]});case"DRAFT_COMPLETE":return(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(c(),{href:"/pools/".concat(t,"/matches/").concat(e.gameId,"/result"),className:"btn-primary text-sm",children:"결과 입력하기"}),(0,a.jsx)("button",{onClick:t=>{t.stopPropagation(),P(e.gameId)},className:"px-4 py-2 bg-purple-500/20 text-purple-400 hover:bg-purple-500/30 rounded-lg font-semibold text-sm transition-colors",children:"챔피언 교환"}),(0,a.jsx)("button",{onClick:t=>T(e.gameId,t),className:"px-3 py-1.5 bg-yellow-500/20 text-yellow-500 hover:bg-yellow-500/30 rounded-lg font-semibold text-sm transition-colors",children:"밴픽 초기화"}),!e.isApplied&&(0,a.jsx)("button",{onClick:t=>D(e.gameId,t),className:"px-3 py-1.5 bg-red-500/20 text-red-500 hover:bg-red-500/30 rounded-lg font-semibold text-sm transition-colors",title:"전적 삭제",children:"삭제"})]});case"RESULT_PENDING":return(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(c(),{href:"/pools/".concat(t,"/matches/").concat(e.gameId,"/result"),className:"px-4 py-2 bg-blue-500/20 text-blue-500 hover:bg-blue-500/30 rounded-lg font-semibold text-sm transition-colors",children:"수정"}),s&&(0,a.jsx)(c(),{href:"/pools/".concat(t,"/matches/").concat(e.gameId,"/approve"),className:"btn-primary text-sm",children:"결과 반영하기"})]});default:return null}})(e),r&&(0,a.jsx)("span",{className:"text-xs text-[var(--text-muted)] ml-2",children:s?"▲":"▼"})]})]}),(0,a.jsx)("div",{className:"transition-all duration-300 ease-in-out overflow-hidden ".concat(r&&!s?"max-h-0 opacity-0":"max-h-[2000px] opacity-100"),children:(0,a.jsxs)("div",{className:"px-6 pb-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsx)("h3",{className:"font-semibold text-[var(--text-primary)]",children:"Team 1"}),(0,a.jsxs)("span",{className:"text-sm text-[var(--text-muted)]",children:["총점: ",M(e,1)]})]}),(0,a.jsx)("div",{className:"space-y-2",children:O(e.team1Data.players).map((t,s)=>{let r=R(e,t.userId),l=A(e,t.userId);return(0,a.jsx)(d,{player:t,champion:r,stats:l,matchStatus:e.status,positionLabel:u[t.assignedPosition],accentColor:"text-[var(--accent-purple)]"},s)})})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsx)("h3",{className:"font-semibold text-[var(--text-primary)]",children:"Team 2"}),(0,a.jsxs)("span",{className:"text-sm text-[var(--text-muted)]",children:["총점: ",M(e,2)]})]}),(0,a.jsx)("div",{className:"space-y-2",children:O(e.team2Data.players).map((t,s)=>{let r=R(e,t.userId),l=A(e,t.userId);return(0,a.jsx)(d,{player:t,champion:r,stats:l,matchStatus:e.status,positionLabel:u[t.assignedPosition],accentColor:"text-[var(--accent-blue)]"},s)})})]})]}),null!==e.team1Won&&(0,a.jsx)("div",{className:"mt-4 pt-4 border-t border-[var(--border-color)]",children:(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-[var(--text-muted)]",children:"킬"}),(0,a.jsxs)("p",{className:"text-lg font-semibold text-[var(--text-primary)]",children:[e.team1Kills," : ",e.team2Kills]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-[var(--text-muted)]",children:"골드"}),(0,a.jsxs)("p",{className:"text-lg font-semibold text-[var(--text-primary)]",children:[e.team1Gold.toLocaleString()," :"," ",e.team2Gold.toLocaleString()]})]})]})})]})})]},e.gameId)})}),w&&(0,a.jsx)(o,{poolId:t,matchId:w,onClose:()=>k(null)}),I&&(()=>{let e=s.find(e=>e.gameId===I);return e?(0,a.jsx)(i,{matchId:I,poolId:t,team1Players:e.team1Data.players,team2Players:e.team2Data.players,onClose:()=>P(null),onSwapSuccess:()=>{L()}}):null})()]})}},7950:(e,t,s)=>{"use strict";var a=s(3858);s.o(a,"useParams")&&s.d(t,{useParams:function(){return a.useParams}}),s.o(a,"usePathname")&&s.d(t,{usePathname:function(){return a.usePathname}}),s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}})},9794:(e,t,s)=>{Promise.resolve().then(s.bind(s,6491))}},e=>{e.O(0,[8541,2613,6299,7358],()=>e(e.s=9794)),_N_E=e.O()}]);