(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6636],{488:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>u});var s=a(413),r=a(5509),n=a(3353),l=a(7950),i=a(8541),c=a.n(i),d=a(6207);let o=["TOP","JGL","MID","ADC","SUP"];function u(){var e;let{user:t,loading:a,refreshUser:i}=(0,r.A)(),u=(0,l.useRouter)(),[m,x]=(0,n.useState)({name:"",riotAccount:"",mainLane:"",subLane:""}),[h,v]=(0,n.useState)(""),[p,b]=(0,n.useState)(""),[f,j]=(0,n.useState)(!1);(0,n.useEffect)(()=>{a||t||u.push("/login")},[t,a,u]),(0,n.useEffect)(()=>{if(t){let e=t.riotId&&t.riotTag?"".concat(t.riotId,"#").concat(t.riotTag):t.riotId||"";x({name:t.name||"",riotAccount:e,mainLane:t.mainLane||"",subLane:t.subLane||""})}},[t]);let N=(e,t)=>{x(a=>({...a,[e]:t})),v(""),b("")},g=async e=>{if(e.preventDefault(),v(""),b(""),m.mainLane&&m.mainLane===m.subLane)return void v("메인 포지션과 서브 포지션은 달라야 합니다.");j(!0);try{let e=null,s=null;if(m.riotAccount){var t,a;let r=m.riotAccount.split("#");e=(null==(t=r[0])?void 0:t.trim())||null,s=(null==(a=r[1])?void 0:a.trim())||null}let r=await fetch("/api/profile",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:m.name||null,riotId:e,riotTag:s,mainLane:m.mainLane||null,subLane:m.subLane||null})});if(r.ok)b("프로필이 업데이트되었습니다."),await i();else{let e=await r.json();v(e.error||"프로필 업데이트에 실패했습니다.")}}catch(e){v("프로필 업데이트 중 오류가 발생했습니다.")}finally{j(!1)}};return a||!t?(0,s.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[var(--accent-purple)]"})}):(0,s.jsxs)("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-4xl font-black mb-3 gradient-text",children:"프로필 설정"}),(0,s.jsx)("p",{className:"text-[var(--text-secondary)]",children:"내 정보를 관리하고 업데이트하세요"})]}),(0,s.jsx)(c(),{href:"/dashboard",className:"btn-secondary",children:"← 대시보드"})]}),(0,s.jsxs)("div",{className:"card mb-6",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-6 mb-6 pb-6 border-b border-[var(--border)]",children:[(0,s.jsx)("div",{className:"w-24 h-24 rounded-full bg-gradient-to-br from-[var(--accent-purple)] to-[var(--accent-blue)] flex items-center justify-center text-white font-bold text-4xl",children:null==(e=t.username[0])?void 0:e.toUpperCase()}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("h2",{className:"text-3xl font-bold text-[var(--text-primary)] mb-2",children:t.username}),(0,s.jsx)("p",{className:"text-[var(--text-secondary)] mb-3",children:t.email}),(0,s.jsxs)("div",{className:"flex gap-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-sm text-[var(--text-muted)]",children:"점수"}),(0,s.jsx)("div",{className:"text-2xl font-bold gradient-text",children:t.score})]}),(0,s.jsx)("div",{className:"h-12 w-px bg-[var(--border)]"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-sm text-[var(--text-muted)]",children:"연승/연패"}),(0,s.jsxs)("div",{className:"text-2xl font-bold ".concat(t.winLossStreak>0?"text-[var(--success)]":t.winLossStreak<0?"text-[var(--error)]":"text-[var(--text-secondary)]"),children:[t.winLossStreak>0?"+":"",t.winLossStreak]})]})]})]})]}),(0,s.jsxs)("form",{onSubmit:g,className:"space-y-5",children:[h&&(0,s.jsx)("div",{className:"px-4 py-3 rounded-lg bg-[var(--error)]/10 border border-[var(--error)]/30 text-[var(--error)] text-sm",children:h}),p&&(0,s.jsx)("div",{className:"px-4 py-3 rounded-lg bg-[var(--success)]/10 border border-[var(--success)]/30 text-[var(--success)] text-sm",children:p}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,s.jsx)("div",{className:"h-px flex-1 bg-gradient-to-r from-transparent via-[var(--border)] to-transparent"}),(0,s.jsx)("span",{className:"text-xs font-semibold text-[var(--text-muted)] uppercase tracking-wider",children:"기본 정보"}),(0,s.jsx)("div",{className:"h-px flex-1 bg-gradient-to-r from-[var(--border)] via-transparent to-transparent"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"username",className:"block text-sm font-medium text-[var(--text-primary)] mb-2",children:"사용자명"}),(0,s.jsx)("input",{id:"username",type:"text",value:t.username,disabled:!0,className:"input w-full opacity-50 cursor-not-allowed"}),(0,s.jsx)("p",{className:"mt-1 text-xs text-[var(--text-muted)]",children:"사용자명은 변경할 수 없습니다"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-[var(--text-primary)] mb-2",children:"이메일"}),(0,s.jsx)("input",{id:"email",type:"email",value:t.email,disabled:!0,className:"input w-full opacity-50 cursor-not-allowed"}),(0,s.jsx)("p",{className:"mt-1 text-xs text-[var(--text-muted)]",children:"이메일은 변경할 수 없습니다"})]})]})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,s.jsx)("div",{className:"h-px flex-1 bg-gradient-to-r from-transparent via-[var(--border)] to-transparent"}),(0,s.jsx)("span",{className:"text-xs font-semibold text-[var(--text-muted)] uppercase tracking-wider",children:"게임 정보"}),(0,s.jsx)("div",{className:"h-px flex-1 bg-gradient-to-r from-[var(--border)] via-transparent to-transparent"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-[var(--text-primary)] mb-2",children:"이름"}),(0,s.jsx)("input",{id:"name",type:"text",value:m.name,onChange:e=>N("name",e.target.value),className:"input w-full",placeholder:"홍길동",disabled:f})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"riotAccount",className:"block text-sm font-medium text-[var(--text-primary)] mb-2",children:"라이엇 계정"}),(0,s.jsx)("input",{id:"riotAccount",type:"text",value:m.riotAccount,onChange:e=>N("riotAccount",e.target.value),className:"input w-full",placeholder:"HideOnBush#KR1",disabled:f}),(0,s.jsx)("p",{className:"mt-1 text-xs text-[var(--text-muted)]",children:"예시: HideOnBush#KR1"})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsx)(d.A,{id:"mainLane",label:"메인 포지션",value:m.mainLane,onChange:e=>N("mainLane",e),options:[{value:"",label:"선택하지 않음"},...o.map(e=>({value:e,label:e}))],placeholder:"선택하지 않음",disabled:f}),(0,s.jsx)(d.A,{id:"subLane",label:"서브 포지션",value:m.subLane,onChange:e=>N("subLane",e),options:[{value:"",label:"선택하지 않음"},...o.filter(e=>e!==m.mainLane).map(e=>({value:e,label:e}))],placeholder:"선택하지 않음",disabled:f})]})]}),(0,s.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,s.jsx)("button",{type:"submit",disabled:f,className:"btn-primary flex-1 flex items-center justify-center",children:f?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),"저장 중..."]}):"변경사항 저장"}),(0,s.jsx)(c(),{href:"/dashboard",className:"btn-secondary flex items-center justify-center px-8",children:"취소"})]})]})]}),(0,s.jsx)("div",{className:"card",children:(0,s.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,s.jsx)("svg",{className:"w-5 h-5 text-[var(--accent-blue)] mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,s.jsxs)("div",{className:"text-sm text-[var(--text-secondary)]",children:[(0,s.jsx)("p",{className:"font-semibold text-[var(--text-primary)] mb-2",children:"프로필 정보 안내"}),(0,s.jsxs)("ul",{className:"list-disc list-inside space-y-1",children:[(0,s.jsx)("li",{children:"라이엇 계정과 포지션 정보는 팀 생성 시 참고됩니다"}),(0,s.jsx)("li",{children:"점수는 게임 결과에 따라 자동으로 업데이트됩니다"}),(0,s.jsx)("li",{children:"사용자명과 이메일은 보안을 위해 변경할 수 없습니다"})]})]})]})})]})}},4452:(e,t,a)=>{Promise.resolve().then(a.bind(a,488))},5509:(e,t,a)=>{"use strict";a.d(t,{A:()=>c,AuthProvider:()=>i});var s=a(413),r=a(3353),n=a(7950);let l=(0,r.createContext)(void 0);function i(e){let{children:t}=e,[a,i]=(0,r.useState)(null),[c,d]=(0,r.useState)(!0),o=(0,n.useRouter)();(0,r.useEffect)(()=>{u()},[]);let u=async()=>{try{let e=await fetch("/api/auth/me");if(e.ok){let t=await e.json();i(t.data)}else i(null)}catch(e){console.error("Error fetching user:",e),i(null)}finally{d(!1)}},m=async(e,t)=>{let a=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})});if(!a.ok)throw Error((await a.json()).error||"Login failed");i((await a.json()).data.user),o.push("/dashboard")},x=async e=>{let t=await fetch("/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error((await t.json()).error||"Registration failed");i((await t.json()).data.user),o.push("/dashboard")},h=async()=>{await fetch("/api/auth/logout",{method:"POST"}),i(null),o.push("/login")},v=async()=>{await u()};return(0,s.jsx)(l.Provider,{value:{user:a,loading:c,login:m,register:x,logout:h,refreshUser:v},children:t})}function c(){let e=(0,r.useContext)(l);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},6207:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});var s=a(413),r=a(3353);function n(e){let{id:t,value:a,onChange:n,options:l,placeholder:i="선택하세요",disabled:c=!1,label:d}=e,[o,u]=(0,r.useState)(!1),[m,x]=(0,r.useState)(-1),h=(0,r.useRef)(null),v=l.find(e=>e.value===a);return(0,r.useEffect)(()=>{let e=e=>{h.current&&!h.current.contains(e.target)&&u(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),(0,r.useEffect)(()=>{if(!o)return;let e=e=>{switch(e.key){case"ArrowDown":e.preventDefault(),x(e=>e<l.length-1?e+1:e);break;case"ArrowUp":e.preventDefault(),x(e=>e>0?e-1:e);break;case"Enter":e.preventDefault(),m>=0&&(n(l[m].value),u(!1));break;case"Escape":e.preventDefault(),u(!1)}};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[o,m,l,n]),(0,s.jsxs)("div",{ref:h,className:"relative",children:[d&&(0,s.jsx)("label",{htmlFor:t,className:"block text-sm font-medium text-[var(--text-primary)] mb-2",children:d}),(0,s.jsxs)("button",{id:t,type:"button",onClick:()=>!c&&u(!o),disabled:c,className:"\n          input w-full flex items-center justify-between\n          ".concat(c?"opacity-50 cursor-not-allowed":"cursor-pointer","\n          ").concat(o?"border-[var(--accent-purple)] ring-2 ring-[var(--accent-purple)]/20":"","\n        "),children:[(0,s.jsx)("span",{className:v?"text-[var(--text-primary)]":"text-[var(--text-muted)]",children:(null==v?void 0:v.label)||i}),(0,s.jsx)("svg",{className:"w-4 h-4 text-[var(--text-muted)] transition-transform ".concat(o?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),o&&!c&&(0,s.jsx)("div",{className:"absolute z-50 w-full mt-2 bg-[var(--surface)] border border-[var(--border)] rounded-lg shadow-lg overflow-hidden animate-dropdown",children:(0,s.jsx)("div",{className:"max-h-60 overflow-y-auto",children:l.map((e,t)=>(0,s.jsx)("button",{type:"button",onClick:()=>{n(e.value),u(!1),x(-1)},onMouseEnter:()=>x(t),className:"\n                  w-full px-4 py-2.5 text-left text-sm transition-colors\n                  ".concat(e.value===a?"bg-[var(--accent-purple)]/10 text-[var(--accent-purple)] font-medium":m===t?"bg-[var(--accent-blue)]/10 text-[var(--accent-blue)] font-medium":"text-[var(--text-secondary)] hover:bg-[var(--accent-blue)]/10 hover:text-[var(--accent-blue)]","\n                "),children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{children:e.label}),e.value===a&&(0,s.jsx)("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})]})},e.value))})})]})}},7950:(e,t,a)=>{"use strict";var s=a(3858);a.o(s,"useParams")&&a.d(t,{useParams:function(){return s.useParams}}),a.o(s,"usePathname")&&a.d(t,{usePathname:function(){return s.usePathname}}),a.o(s,"useRouter")&&a.d(t,{useRouter:function(){return s.useRouter}})}},e=>{e.O(0,[8541,2613,6299,7358],()=>e(e.s=4452)),_N_E=e.O()}]);